---
title: "Evaluating bias and variance across different validation methods for disease simulation models"
header-includes:
  - \usepackage{amssymb}
  - \usepackage{amsmath}
  - \usepackage{bm}
  - \newcommand\given[1][]{\:#1\vert\:}
output:
  ioslides_presentation:
    smaller: TRUE
    transition: slower
    widescreen: TRUE
    css: styles.css
runtime: shiny
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Optimism 
- <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">SAMPLE</span> from <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">POPULATION</span> of interest

- Fit model in <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">SAMPLE</span> 

- <span style="font-weight: bold">Optimism</span> = <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">AUC</span> -- <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">AUC</span> 


## Optimism correction | Split sample
- Split <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">TRAIN</span> and <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">TEST</span> 

- Fit model in <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">TRAIN</span>

- Calculate optimism-corrected AUC from <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">AUC</span> 

## Optimism correction | Cross-validation
- Split <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">TRAIN</span> and <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">TEST</span> 

- Fit model in <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">TRAIN</span>

- Calculate optimism-corrected AUC from <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">AUC</span> 

- Reverse and repeat

- Calculate optimism-corrected AUC as the average performance on the different <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">TEST</span> sets

## Optimism correction | Bootstrap
- Fit model on <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">SAMPLE</span> and calculate <span style="background-color: steelblue; color: white;border-radius: 25px; padding: 6px">AUC</span>

- Draw <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">BOOTSTRAP SAMPLE</span> from <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">SAMPLE</span> 

- Fit model in <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">BOOTSTRAP SAMPLE</span>

- Apply model on <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">SAMPLE</span>

- <span style="font-weight: bold">Optimism</span> = <span style="background-color: coral; color: white;border-radius: 25px; padding: 6px">AUC</span> -- <span style="background-color: green; color: white;border-radius: 25px; padding: 6px">AUC</span> 

- Repeat 100 times

- Calculate optimism-corrected AUC from <span style="background-color: steelblue; color: white;border-radius: 25px; padding: 6px">AUC</span> - mean(**Optimism**)


## Setup {.flexbox}
```{r fig1, echo=FALSE, fig.show="hold", out.width="50%"}
knitr::include_graphics(here::here("figures/microsimulation.png"))
knitr::include_graphics(here::here("figures/microsimulation_table.png"))
```


## Results
```{r fig2, echo=FALSE, fig.show="hold"}
knitr::include_graphics(here::here("figures/result_base.png"))
```
